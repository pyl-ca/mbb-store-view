<template>
  <div class="review-demo-container">
    <div class="page-header">
      <h1 class="page-title">å•†å“è¯„è®ºåŠŸèƒ½æ¼”ç¤º</h1>
      <p class="page-desc">è¿™æ˜¯ä¸€ä¸ªå•†å“è¯„è®ºåŠŸèƒ½çš„æ¼”ç¤ºé¡µé¢ï¼Œå±•ç¤ºäº†è¯„è®ºåˆ—è¡¨ã€ç­›é€‰ã€åˆ†é¡µç­‰åŠŸèƒ½</p>
    </div>

    <!-- æ¨¡æ‹Ÿå•†å“ä¿¡æ¯ -->
    <div class="product-demo">
      <el-card>
        <div class="product-info">
          <el-image
            src="/images/placeholder/product.png"
            fit="cover"
            class="product-image"
          />
          <div class="product-details">
            <h3>æ¼”ç¤ºå•†å“ - iPhone 15 Pro Max</h3>
            <p>é¢œè‰²ï¼šæ·±ç©ºé»‘è‰² | å®¹é‡ï¼š256GB</p>
            <div class="product-rating">
              <el-rate v-model="demoRating" disabled show-score text-color="#ff9900" />
              <span class="rating-text">{{ demoRating.toFixed(1) }}åˆ† ({{ demoReviewCount }}æ¡è¯„ä»·)</span>
            </div>
          </div>
        </div>
      </el-card>
    </div>

    <!-- è¯„è®ºç»„ä»¶æ¼”ç¤º -->
    <div class="reviews-demo">
      <el-card>
        <template #header>
          <div class="card-header">
            <span>å•†å“è¯„ä»·</span>
            <el-button type="primary" @click="showMockData = !showMockData">
              {{ showMockData ? 'éšè—' : 'æ˜¾ç¤º' }}æ¨¡æ‹Ÿæ•°æ®
            </el-button>
          </div>
        </template>

        <div v-if="showMockData">
          <ProductReviews :product-id="1" ref="reviewsRef" />
        </div>
        <div v-else class="empty-state">
          <el-empty description="ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹è¯„è®ºæ¼”ç¤º" />
        </div>
      </el-card>
    </div>

    <!-- åŠŸèƒ½è¯´æ˜ -->
    <div class="feature-intro">
      <el-card>
        <template #header>
          <span>åŠŸèƒ½ç‰¹æ€§</span>
        </template>

        <div class="features-grid">
          <div class="feature-item">
            <div class="feature-icon">ğŸ“</div>
            <h4>è¯„è®ºå‘å¸ƒ</h4>
            <p>æ”¯æŒæ˜Ÿçº§è¯„åˆ†ã€æ–‡å­—è¯„è®ºã€å›¾ç‰‡ä¸Šä¼ </p>
          </div>

          <div class="feature-item">
            <div class="feature-icon">ğŸ”</div>
            <h4>è¯„è®ºç­›é€‰</h4>
            <p>æŒ‰è¯„åˆ†ã€æ—¶é—´ã€æ˜¯å¦æœ‰å›¾ç­‰æ¡ä»¶ç­›é€‰</p>
          </div>

          <div class="feature-item">
            <div class="feature-icon">ğŸ“Š</div>
            <h4>è¯„è®ºç»Ÿè®¡</h4>
            <p>è¯„åˆ†åˆ†å¸ƒã€å¹³å‡è¯„åˆ†ã€è¯„è®ºæ•°é‡ç»Ÿè®¡</p>
          </div>

          <div class="feature-item">
            <div class="feature-icon">ğŸ‘</div>
            <h4>äº’åŠ¨åŠŸèƒ½</h4>
            <p>ç‚¹èµè¯„è®ºã€å•†å®¶å›å¤ã€åŒ¿åè¯„ä»·</p>
          </div>

          <div class="feature-item">
            <div class="feature-icon">ğŸ›¡ï¸</div>
            <h4>å†…å®¹å®¡æ ¸</h4>
            <p>è¯„è®ºå®¡æ ¸æœºåˆ¶ï¼Œç¡®ä¿å†…å®¹è´¨é‡</p>
          </div>

          <div class="feature-item">
            <div class="feature-icon">ğŸ“±</div>
            <h4>å“åº”å¼è®¾è®¡</h4>
            <p>é€‚é…å„ç§è®¾å¤‡ï¼Œæä¾›è‰¯å¥½ç”¨æˆ·ä½“éªŒ</p>
          </div>
        </div>
      </el-card>
    </div>

    <!-- API è¯´æ˜ -->
    <div class="api-intro">
      <el-card>
        <template #header>
          <span>API æ¥å£è¯´æ˜</span>
        </template>

        <div class="api-list">
          <div class="api-item">
            <el-tag type="success">GET</el-tag>
            <code>/api/v1/reviews</code>
            <span>è·å–å•†å“è¯„è®ºåˆ—è¡¨</span>
          </div>

          <div class="api-item">
            <el-tag type="primary">POST</el-tag>
            <code>/api/v1/reviews</code>
            <span>å‘å¸ƒå•†å“è¯„è®º</span>
          </div>

          <div class="api-item">
            <el-tag type="warning">PUT</el-tag>
            <code>/api/v1/reviews/{id}</code>
            <span>æ›´æ–°è¯„è®ºå†…å®¹</span>
          </div>

          <div class="api-item">
            <el-tag type="danger">DELETE</el-tag>
            <code>/api/v1/reviews/{id}</code>
            <span>åˆ é™¤è¯„è®º</span>
          </div>

          <div class="api-item">
            <el-tag type="info">GET</el-tag>
            <code>/api/v1/reviews/stats/{productId}</code>
            <span>è·å–è¯„è®ºç»Ÿè®¡ä¿¡æ¯</span>
          </div>
        </div>
      </el-card>
    </div>

    <!-- æ³¨æ„äº‹é¡¹ -->
    <div class="notice">
      <el-alert
        title="å¼€å‘è¯´æ˜"
        type="info"
        :closable="false"
        show-icon
      >
        <template #default>
          <p>1. å½“å‰ä¸ºæ¼”ç¤ºç‰ˆæœ¬ï¼Œåç«¯APIæ¥å£å°šæœªå®ç°ï¼Œè¯„è®ºæ•°æ®ä¸ºæ¨¡æ‹Ÿæ•°æ®</p>
          <p>2. å®é™…ä½¿ç”¨æ—¶éœ€è¦é…ç½®å¯¹åº”çš„åç«¯æœåŠ¡å’Œæ•°æ®åº“</p>
          <p>3. å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½éœ€è¦é…ç½®æ–‡ä»¶å­˜å‚¨æœåŠ¡</p>
          <p>4. è¯„è®ºå®¡æ ¸åŠŸèƒ½éœ€è¦ç®¡ç†åå°æ”¯æŒ</p>
        </template>
      </el-alert>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import ProductReviews from '../components/ProductReviews.vue'

const showMockData = ref(false)
const demoRating = ref(4.5)
const demoReviewCount = ref(128)
const reviewsRef = ref()
</script>

<style scoped>
.review-demo-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  background: #f5f5f5;
  min-height: 100vh;
}

.page-header {
  text-align: center;
  margin-bottom: 30px;
}

.page-title {
  font-size: 28px;
  color: #333;
  margin: 0 0 10px 0;
  font-weight: 600;
}

.page-desc {
  font-size: 16px;
  color: #666;
  margin: 0;
}

.product-demo,
.reviews-demo,
.feature-intro,
.api-intro {
  margin-bottom: 30px;
}

.product-info {
  display: flex;
  align-items: center;
  gap: 20px;
}

.product-image {
  width: 100px;
  height: 100px;
  border-radius: 8px;
  flex-shrink: 0;
}

.product-details h3 {
  font-size: 18px;
  color: #333;
  margin: 0 0 8px 0;
}

.product-details p {
  font-size: 14px;
  color: #666;
  margin: 0 0 12px 0;
}

.product-rating {
  display: flex;
  align-items: center;
  gap: 12px;
}

.rating-text {
  font-size: 14px;
  color: #666;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.empty-state {
  padding: 40px 0;
  text-align: center;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
}

.feature-item {
  text-align: center;
  padding: 20px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  background: #fafafa;
}

.feature-icon {
  font-size: 32px;
  margin-bottom: 12px;
}

.feature-item h4 {
  font-size: 16px;
  color: #333;
  margin: 0 0 8px 0;
}

.feature-item p {
  font-size: 14px;
  color: #666;
  margin: 0;
  line-height: 1.5;
}

.api-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.api-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: #f8f9fa;
  border-radius: 6px;
}

.api-item code {
  background: #e9ecef;
  padding: 4px 8px;
  border-radius: 4px;
  font-family: 'Courier New', monospace;
  font-size: 14px;
}

.notice {
  margin-top: 30px;
}

.notice p {
  margin: 8px 0;
  line-height: 1.6;
}
</style>
